<!doctype html>

<html lang='en'>
	
	<head>
			
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

		<!-- Compiled and minified CSS -->
  		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

  		<!-- Compiled and minified JavaScript -->
  		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

  		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

		<title>Flash Card Generator</title>

		<style>
			
			

		</style>

	</head>

	<body>
		
		<div class="container">

			<div class="row">

				<div class="col m12"> 
					
					<h1 class="center-align">FlashCard Generator</h1>
				
				</div>

			</div>

			<div id="formsection" class="row">
    
		    	<form class="col m12">
			      
			      <div class="row">

			        <div class="input-field col m12">
			          <input placeholder="Fulltext" id="fulltext" type="text" class="validate">
			          <label for="fulltext">Full Text</label>
			        </div>

			        <div class="input-field col m12">
			          <input placeholder="Cloze" id="cloze" type="text" class="validate">
			          <label for="Cloze">Cloze</label>
			        </div>
			      
			      </div>

			      <input id="submit" type="submit" value="Submit">
    
				</form>
  	
  			</div>

			<div id="cards"></div>
		
		</div>

	</body>

	<script>

	$(document).ready(function() {

		//alert("hello world");
		$("#submit").on("click", function(e){

			e.preventDefault();
			console.log("clicked");
			//console.log(e);

			//console.log($("#fulltext").val());
			//console.log($("#cloze").val());

			var fText = $("#fulltext").val();
			var bText = $("#cloze").val();

			//var bCard = new BasicCard(fText,bText);

			//console.log(bCard.front);
			var url = "http://127.0.0.1:8080/BasicCard?" + "ft=" + fText + "&" + "bt=" + bText;

			$.ajax({
		    
		          url: url,
		          method: 'GET',
		    
		    }).done(function(result) {

		    	var row = $("<div>");
		    	row.attr("class", "row");
		    	$("#cards").append(row);

		    	createBasicCard(result, row);
		    	createClozeCard(result, row);
		          //console.log(result.response.docs.splice(number));
		          //var actualArticles = result.response.docs.splice(number);
		          //console.log(actualArticles);
		          //populate(removeArticle(result.response.docs, number));
		          /*
		          console.log(result);

		          var row = $("<div>");
		          row.attr("class", "row");
		          var col = $("<div>");
		          col.attr("class", "col m12");
		          var color = $("<div>");
		          color.attr("class", "blue-grey darken-1");
		          var content = $("<div>");
		          content.attr("class", "card-content white-text");
		          var title = $("<span>");
		          title.attr("class", "card-title");
		          title.html("Flash Card");
		          var pfront = $("<p>");
		          pfront.html(result[0].front);
		          var pback = $("<p>");
		          pback.html(result[0].front);

		          content.append(title);
		          content.append(pfront);
		          color.append(content);
		          col.append(color);
		          row.append(col);

		          console.log(row);

		          $("#cards").append(row);



/*
		            			<div class="row">
		        <div class="col m12">
		          <div class="card blue-grey darken-1">
		            <div class="card-content white-text">
		              <span class="card-title">Card Title</span>
		              <p>I am a very simple card. I am good at containing small bits of information.
		              I am convenient because I require little markup to use effectively.</p>
		            </div>
		            <div class="card-action">
		              <a href="#">This is a link</a>
		              <a href="#">This is a link</a>
		            </div>
		          </div>
		        </div>
		    </div>

		    <div class="card-action">
              <a href="#">This is a link</a>
              <a href="#">This is a link</a>
            </div>
*/


		    }).fail(function(err) {

		        throw err;

		    });

		})


	});


	function createBasicCard(array, row) {

		//var row = $("<div>");
		//row.attr("class", "row");

		var col = $("<div>");
		col.attr("class", "col m6");

		var color = $("<div>");
		color.attr("class", "card blue-grey darken-1");

		var content = $("<div>");
		content.attr("class", "card-content white-text center-align");

		var title = $("<span>");
		title.attr("class", "card-title");
		title.html("Basic Flash Card");

		var pFront = $("<p>");
		pFront.html(array[0].front.replace(/%20/g, " "));

		var pBack = $("<p>");
		pBack.html(array[0].back.replace(/%20/g, " "));

		var action = $("<div>");
		action.attr("class", "card-action");

		action.html("<a href='#'>Front</a>" +
		            "<a href='#'>Back</a>");

		content.append(title);
		content.append(pFront);
		content.append(pBack);
		color.append(content);
		color.append(action);
		col.append(color);
		row.append(col);
		


		//$("#cards").append(row);


	}

	function createClozeCard(array, row) {

		//var row = $("<div>");
		//row.attr("class", "row");

		var col = $("<div>");
		col.attr("class", "col m6");

		var color = $("<div>");
		color.attr("class", "card blue-grey darken-1");

		var content = $("<div>");
		content.attr("class", "card-content white-text center-align");
		var title = $("<span>");
		title.attr("class", "card-title");
		title.html("Cloze Flash Card");

		var pFullText = $("<p>");
		pFullText.html(array[1].fullText.replace(/%20/g, " "));

		var pCloze = $("<p>");
		pCloze.html(array[1].cloze.replace(/%20/g, " "));

		var pPartial = $("<p>");
		pPartial.html(array[1].partial.replace(/%20/g, " "));

		var action = $("<div>");
		action.attr("class", "card-action");

		action.html("<a href='#'>Full</a>" +
		            "<a href='#'>Test</a>" +
		            "<a href='#'>Answer</a>");

		content.append(title);
		content.append(pFullText);
		content.append(pCloze);
		content.append(pPartial);
		color.append(content);
		color.append(action);
		col.append(color);

		row.append(col);

		//console.log(row);

		//$("#cards").append(col);

	}

	</script>

</html>